[Unit]
Description=Shairport Sync MQTT to Flaschen Taschen Display
Documentation=https://github.com/midebevec/shairport-sync-mqtt-display
After=network.target mosquitto.service
Wants=network.target

[Service]
Type=simple
User=root
Group=root
WorkingDirectory=/home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen
# Use the virtual environment Python directly
# Note: Service runs as root, so ft-server must be accessible to root user
ExecStart=/home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen/venv/bin/python /home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen/simple_start.py --no-terminal
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

# Environment variables
Environment=PYTHONPATH=/home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen
Environment=HOME=/root
Environment=PATH=/usr/local/bin:/usr/bin:/bin:/home/midebevec/projects/flaschen-taschen/server:/home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen

# Security settings
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=false
ReadWritePaths=/tmp /var/tmp /home/midebevec/projects/shairport-sync-mqtt-display/python-flaschen-taschen /home/midebevec/projects/flaschen-taschen

# Resource limits
MemoryMax=256M

[Install]
WantedBy=multi-user.target
